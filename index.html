<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IBM PROJECT</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
</head>

<body bgcolor="#ccc">

  <div>
  <div class="wrapper">
    <br><br><br><br><br>
    <center>
      <h1>PLEASE UPLOAD YOUR "IMAGE" OR "VIDEO" FILE BELOW :</h1>
      <br><br><br><br>
    
    <form action="upload.php" method="post" enctype="multipart/form-data" class="upload-form">
      <label for="file" class="file-label">Select a file to upload:</label>
      <input type="file" name="file" id="file" class="file-input" accept="image/*,video/*"><br><br>
      <input type="submit" name="submit" value="Upload" class="submit-btn">
    </form>

    <div id="preview"></div>

  <script>
    const fileInput = document.querySelector('#file');
    const preview = document.querySelector('#preview');



    fileInput.addEventListener('change', function() {
      // When a file is selected, display a preview of the file
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.addEventListener('load', function() {
          if (file.type.startsWith('image/')) {
            // If the file is an image, display it in an <img> element
            preview.innerHTML = '<img src="' + reader.result + '">';
          } else if (file.type.startsWith('video/')) {
            // If the file is a video, display it in a <video> element
            preview.innerHTML = '<video src="' + reader.result + '" controls></video>';
          }
        });
        reader.readAsDataURL(file);
      } else {
        preview.innerHTML = '';
      }
    });
  </script>

<script>
  const form = document.querySelector('form');
  const message = document.querySelector('#message');

  form.addEventListener('submit', function(event) {
    // When the form is submitted, prevent the default behavior and submit the file via AJAX
    event.preventDefault();

    const formData = new FormData(form);

    const xhr = new XMLHttpRequest();
    xhr.open('POST', '/upload', true);
    xhr.onload = function() {
      if (xhr.status === 200) {
        // If the upload was successful, display a success message
        message.textContent = 'File uploaded successfully!';
      } else {
        // If the upload failed, display an error message
        message.textContent = 'Error uploading file. Please try again.';
      }
    };
    xhr.onerror = function() {
      // If the upload failed due to a network error, display an error message
      message.textContent = 'Network error uploading file. Please try again.';
    };
    xhr.send(formData);
  });
</script>

  </center>
    <section class="progress-area"></section>
    <section class="uploaded-area"></section>
  </div>
  <script src="script.js"></script>
</div>

</body>
</html>
